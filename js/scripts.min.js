document.addEventListener("DOMContentLoaded", () => {
  const e = {
    els: {
      html: document.documentElement,
      themeBtn: document.getElementById("themeToggle"),
      themeIcon: document.querySelector("#themeToggle span"),
      menuBtn: document.getElementById("mobileMenuBtn"),
      mobileNav: document.getElementById("mobileNav"),
      menuIcon: document.querySelector("#mobileMenuBtn span"),
    },
    initTheme() {
      const e = localStorage.getItem("theme");
      e && (this.els.html.setAttribute("data-theme", e), this.updateIcon(e)),
        this.els.themeBtn.addEventListener("click", () => {
          const e =
            "light" === this.els.html.getAttribute("data-theme")
              ? "dark"
              : "light";
          this.els.html.setAttribute("data-theme", e),
            localStorage.setItem("theme", e),
            this.updateIcon(e);
        });
    },
    updateIcon(e) {
      this.els.themeIcon.textContent =
        "dark" === e ? "light_mode" : "dark_mode";
    },
    initMobileMenu() {
      this.els.menuBtn.addEventListener("click", () => this.toggleMenu()),
        document.addEventListener("click", (e) => {
          this.els.mobileNav.contains(e.target) ||
            this.els.menuBtn.contains(e.target) ||
            !this.els.mobileNav.classList.contains("open") ||
            this.toggleMenu();
        });
    },
    toggleMenu() {
      this.els.mobileNav.classList.contains("open")
        ? (this.els.mobileNav.classList.remove("open"),
          (this.els.menuIcon.textContent = "menu"),
          (document.body.style.overflow = ""))
        : (this.els.mobileNav.classList.add("open"),
          (this.els.menuIcon.textContent = "close"),
          (document.body.style.overflow = "hidden"));
    },
    initSmoothScroll() {
      document.querySelectorAll('a[href^="#"]').forEach((e) => {
        e.addEventListener("click", (t) => {
          const n = document.querySelector(e.getAttribute("href"));
          n &&
            (t.preventDefault(),
            this.els.mobileNav.classList.contains("open") && this.toggleMenu(),
            n.scrollIntoView({ behavior: "smooth" }));
        });
      });
    },
    init() {
      this.initTheme(), this.initMobileMenu(), this.initSmoothScroll();
    },
  };
  (window.app = e), e.init();
});
